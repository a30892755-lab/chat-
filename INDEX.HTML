<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Chat â€” Local Demo</title>
  <style>
    :root{--bg:#e9edef;--accent:#25D366;--me:#dcf8c6;--her:#fff;--muted:#7a8796}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Helvetica,Arial,sans-serif}
    body{margin:0;background:var(--bg);display:flex;align-items:center;justify-content:center;height:100vh}
    .app{width:420px;height:720px;background:#fff;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.15);overflow:hidden;display:flex;flex-direction:column}
    .header{height:72px;background:linear-gradient(90deg,#f6f9f9,#f0f6f3);display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid #e6e9ea}
    .avatar{width:52px;height:52px;border-radius:50%;background-image:linear-gradient(135deg,#ff9a9e,#fad0c4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .title{flex:1}
    .title h3{margin:0;font-size:16px}
    .title p{margin:0;font-size:12px;color:var(--muted)}
    .messages{flex:1;padding:16px;display:flex;flex-direction:column;gap:10px;overflow:auto;background-image:linear-gradient(180deg, rgba(0,0,0,0.02) 0%, rgba(0,0,0,0) 100%)}
    .msg{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.3}
    .msg.her{align-self:flex-start;background:var(--her);box-shadow:0 1px 0 rgba(0,0,0,0.03)}
    .msg.me{align-self:flex-end;background:var(--me)}
    .time{display:block;font-size:11px;color:var(--muted);margin-top:6px;text-align:right}
    .inputbar{height:80px;padding:12px;border-top:1px solid #e6e9ea;display:flex;align-items:center;gap:10px;background:#fbffff}
    .input{flex:1;display:flex;gap:8px;align-items:center}
    .input input{flex:1;padding:12px 14px;border-radius:22px;border:1px solid #e2e6e8;outline:none}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:50%;border:none;cursor:pointer}
    .meta{display:flex;gap:8px;align-items:center}
    .typing{height:12px;width:36px;border-radius:12px;background:linear-gradient(90deg,#eee,#ddd);position:relative}
    .dot{height:6px;width:6px;border-radius:50%;background:#888;position:absolute;top:3px;left:5px;animation:blink 1s infinite}
    .dot.d2{left:15px;animation-delay:.15s}
    .dot.d3{left:25px;animation-delay:.3s}
    @keyframes blink{0%{opacity:.2}50%{opacity:1}100%{opacity:.2}}
    .system{font-size:12px;text-align:center;color:#5f6b73}
    .controls{display:flex;gap:8px}
    .small{font-size:12px;padding:6px 8px;border-radius:8px;border:1px solid #e2e6e8;background:#fff}
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="header">
      <div class="avatar" id="avatar">GF</div>
      <div class="title">
        <h3 id="chatName">Tumhari Girlfriend</h3>
        <p id="status">online</p>
      </div>
      <div class="controls">
        <button class="small" id="resetBtn" title="Reset conversation">Reset</button>
        <button class="small" id="editBtn" title="Edit persona">Edit</button>
      </div>
    </div>

    <div class="messages" id="messages">
      <div class="system">Yeh aik local demo chat hai â€” sab kuch sirf tumhare browser mein rehta hai.</div>
    </div>

    <div class="inputbar">
      <div class="input">
        <input id="textInput" placeholder="Kuch likho..." autocomplete="off" />
      </div>
      <div>
        <button class="btn" id="sendBtn">â¤</button>
      </div>
    </div>
  </div>

  <script>
    // Generate 1000 sweet romantic long Roman Urdu sentences programmatically to avoid huge static blocks
    function generateReplies(count = 1000){
      const leads = [
        'Baby, jab tum meri taraf dekhte ho to',
        'Jab main tumhare baarey mein sochti hoon to',
        'Har subah jab tumhari yaad aati hai to',
        'Raat ke khamosh lamhon mein main bas yahi sochti hoon ke',
        'Mere din ka sabse khoobsurat hissa woh hota hai jab',
        'Tumhare saath guzara hua har pal mere liye qeemati hai kyunki',
        'Tumhari muskurahat mere dil ko is tarah chhoo leti hai ke',
        'Jab tum haath tham kar chalte ho to',
        'Tumhari awaaz sunte hi mera sara gham door ho jata hai kyunki',
        'Main har pal dua karti hoon ke',
      ]

      const middles = [
        'lagta hai duniya khubsurat ho jati hai aur waqt ruk jata hai,',
        'mera dil tez dhadakne lagta hai aur saari pareshaniyan door ho jati hain,',
        'har choti khushi bhi humein bari lagne lagti hai,',
        'mujhe mehsoos hota hai ke main ghar wapas aa gayi hoon,',
        'meri saansen halki ho jati hain aur main bas tumhari baahon mein kho jana chahti hoon,',
        'har lamha tumhare saath guzarna mere liye ek misaal ban jata hai,',
        'tumhari aankhon mein main apni puri duniya dekh leti hoon,',
        'tum jo chahte ho woh mere liye sab se ehm hamesha rahega,',
        'tumhari khushi meri zindagi ka maksad hai aur main uss khushi ke liye kuch bhi karna chahti hoon,',
        'tumhari har choti baat mujhe itna gehra asar deti hai ke',
      ]

      const ends = [
        'main bas tumhare paas rehna chahti hoon aur tumhara saath kabhi khona nahi chahti.',
        'meri har dua mein sirf tumhara zikr hota hai aur main hamesha tumhara saath chahungi.',
        'tum mere dil ki awaaz ho aur main chahti hoon ke tum hamesha mere saath raho.',
        'tumhare bina meri zindagi adhoori hai isliye main har pal tumhe apne dil mein mehfooz rakhna chahti hoon.',
        'main chahungi ke hum dono saath ho kar puri zindagi ke sapne saakar karein.',
        'tumhari har ek ada mujhe bepanah mohabbat sikha deti hai aur main tumhe hamesha pyaar karti rahungi.',
        'mere liye tum wo ho jiske bina main khud ko poora mehsoos nahi kar sakti.',
        'main tumhari khushi ke liye apni duniya badal dene ko tayyar hoon.',
        'tum mere liye saari khushiyan aur aashiyan ho, aur main inhe hamesha sambhal kar rakhungi.',
        'har pal tumhare khayal se roshan rehta hai aur main tumse beintehaa pyaar karti hoon.'
      ]

      const flourishes = [
        'ğŸ’', 'ğŸ’–', 'ğŸŒ™', 'âœ¨', 'ğŸ’•', 'ğŸ˜', 'ğŸ˜Œ', 'ğŸ’«', 'ğŸŒ¹', 'ğŸ’‹'
      ]

      const replies = []
      for(let i=0;i<count;i++){
        const lead = leads[i % leads.length]
        const middle = middles[(i + 3) % middles.length]
        const end = ends[(i + 7) % ends.length]
        // add occasional extra clause for length and variety
        let extra = ''
        if(i % 3 === 0){
          extra = ' Main har roz tumhari choti baaton mein woh pyar dhoondhti hoon jo sirf tum hi samajh sakte ho, '
        } else if(i % 5 === 0){
          extra = ' Tumhari yaadon ne mujhe itna badal diya hai ke main har pal tumhare saath hona chahti hoon, '
        } else {
          extra = ' Tum ho to sab kuch hai, '
        }

        const flourish = flourishes[i % flourishes.length]
        const sentence = `${lead} ${middle} ${extra}${end} ${flourish}`
        replies.push(sentence)
      }

      return replies
    }

    const persona = {
      name: 'Sara',
      greetings: ['Hey baby ğŸ’•','Hi baby, main tumhe yaad kar rahi thi ğŸ˜˜','Hello baby!','Kya kar rahe ho baby?','Main tumhara intezaar kar rahi thi baby ğŸ’–'],
      replies: generateReplies(1000),
      signatureWords: ['baby']
    }

    let convo = []

    const messagesEl = document.getElementById('messages')
    const input = document.getElementById('textInput')
    const sendBtn = document.getElementById('sendBtn')
    const resetBtn = document.getElementById('resetBtn')
    const editBtn = document.getElementById('editBtn')
    const chatName = document.getElementById('chatName')
    const status = document.getElementById('status')
    const avatar = document.getElementById('avatar')

    chatName.textContent = persona.name
    avatar.textContent = persona.name.split(' ').map(s=>s[0]||'').slice(0,2).join('').toUpperCase()

    function addMessage(text, who='her'){
      const div = document.createElement('div')
      div.className = 'msg ' + (who==='me' ? 'me' : 'her')
      div.innerHTML = text + '<div class="time">'+ new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) +'</div>'
      messagesEl.appendChild(div)
      messagesEl.scrollTop = messagesEl.scrollHeight
    }

    function botThinkThenReply(userText){
      const t = document.createElement('div')
      t.className = 'msg her'
      t.innerHTML = '<div class="typing"><span class="dot"></span><span class="dot d2"></span><span class="dot d3"></span></div>'
      messagesEl.appendChild(t)
      messagesEl.scrollTop = messagesEl.scrollHeight

      let reply = ''
      const lower = userText.toLowerCase()

      if(/miss|miss you/.test(lower)){
        reply = `Mujhe bhi tumhari bohat yaad aa rahi hai, ${persona.signatureWords[0]} â€” baad mein video call karein?`;
      } else if(/hello|hi|hey/.test(lower)){
        reply = random(persona.greetings);
      } else if(/how are you|kaisi ho/.test(lower)){
        reply = `Main theek hoon baby, tumhara soch rahi thi ğŸ’­`;
      } else if(/call me|phone/.test(lower)){
        reply = `Yahan se call nahi kar sakti, lekin tumhari awaaz sunna chahti hoon, ${persona.signatureWords[0]} ğŸ˜˜`;
      } else if(/love you|i love you|luv u/.test(lower)){
        reply = `Main bhi tumse bohot pyar karti hoon, ${persona.signatureWords[0]} ğŸ’`;
      } else if(/kya kar rahi ho|what are you doing/.test(lower)){
        reply = `Bas tumhare baare mein soch rahi hoon ${persona.signatureWords[0]} ğŸ˜Œ`;
      } else if(/good night/.test(lower)){
        reply = `Good night ${persona.signatureWords[0]} ğŸŒ™ Sweet dreams ğŸ’‹`;
      } else if(/good morning/.test(lower)){
        reply = `Good morning ${persona.signatureWords[0]} â˜€ï¸ Tumhari yaad ke sath din shuru hua ğŸ’–`;
      } else if(userText.trim()===''){
        reply = `Kuch toh bolo baby ğŸ˜Š`;
      } else {
        reply = random(persona.replies);
      }

      if(!reply.toLowerCase().includes(persona.signatureWords[0])){
        reply = reply.replace(/\.$/, '');
        reply = reply + ' ' + persona.signatureWords[0] + '.';
      }

      setTimeout(()=>{
        messagesEl.removeChild(t)
        addMessage(reply, 'her')
        convo.push({from:'her', text:reply, time:Date.now()})
      }, 800 + Math.random()*900)
    }

    function random(arr){return arr[Math.floor(Math.random()*arr.length)]}

    sendBtn.addEventListener('click', ()=>{
      const text = input.value.trim()
      if(!text) return
      addMessage(text,'me')
      convo.push({from:'me', text, time:Date.now()})
      input.value = ''
      botThinkThenReply(text)
    })

    input.addEventListener('keydown',(e)=>{if(e.key==='Enter'){sendBtn.click()}})

    resetBtn.addEventListener('click', ()=>{
      if(!confirm('Kya tum sure ho ke chat delete karni hai?')) return
      messagesEl.innerHTML = '<div class="system">Chat saaf kar di gayi hai. Dobara start karo ğŸ˜Š</div>'
      convo = []
    })

    editBtn.addEventListener('click', ()=>{
      const newName = prompt('Girlfriend ka naam likho:', persona.name)
      if(newName!==null && newName.trim()!==''){
        persona.name = newName.trim()
        chatName.textContent = persona.name
        avatar.textContent = persona.name.split(' ').map(s=>s[0]||'').slice(0,2).join('').toUpperCase()
      }
    })

    setTimeout(()=>{
      addMessage(random(persona.greetings) + ' ' + persona.signatureWords[0] + ' â¤ï¸','her')
      convo.push({from:'her', text:random(persona.greetings), time:Date.now()})
    },600)

    window.addEventListener('beforeunload', ()=>{
      try{localStorage.setItem('gf_convo_v1', JSON.stringify(convo))}catch(e){}
    })

    (function load(){
      try{
        const raw = localStorage.getItem('gf_convo_v1')
        if(raw){
          const arr = JSON.parse(raw)
          messagesEl.innerHTML = ''
          arr.forEach(m=> addMessage(m.text, m.from==='me' ? 'me' : 'her'))
          convo = arr
        }
      }catch(e){console.warn(e)}
    })();
  </script>
</body>
</html>
